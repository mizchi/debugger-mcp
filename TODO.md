# debugger-mcp TODO

## v0.1.0 リリース前の修正チェックリスト

### ✅ 完了済み

- [x] ビルドの確認 (`pnpm build`)
- [x] 型チェック (`pnpm typecheck`)
- [x] リント (`pnpm lint`)
- [x] MCPサーバー起動の確認
- [x] 基本的なデバッグセッションの動作確認
- [x] ブレークポイント機能の動作確認
- [x] ステッピング機能の動作確認
- [x] `debug_get_state` ツールの不足を修正 → `debug_get_session_info` に置き換え
- [x] エラーハンドリングのテスト修正（MCPレスポンス形式に対応）
- [x] ウォッチ式のタイミング問題を部分的に修正

### 🔧 修正が必要な項目

#### 高優先度
- [ ] Node.js実行パスの解決問題を修正
  - デバッグアダプターが `node` バイナリを正しく解決できない
  - `process.execPath` を使用するよう修正が必要
- [ ] ウォッチ式の評価タイミングを改善
  - プログラムが `debugger` 文に到達するまでの待機処理を強化
- [ ] テストの期待値を実際の出力形式に合わせる
  - "Breakpoint set" → "Breakpoint 1 set at ..."
  - "Watch added" → "Added watch: ..."

#### 中優先度
- [ ] セッション状態の取得を改善
  - 実行中のプログラムが早期終了する問題に対処
- [ ] ソースマップのインライン検出を改善
- [ ] 統合テストの安定性向上
  - タイムアウトや待機時間の調整

#### 低優先度
- [ ] テストカバレッジの向上
- [ ] エラーメッセージの統一化
- [ ] ドキュメントの更新

### 📊 テスト状況

- **総テスト数**: 43
- **成功**: 31
- **失敗**: 9
- **スキップ**: 3

### 🐛 既知の問題

1. **環境依存の問題**
   - Node.jsのパス解決がプラットフォームによって異なる
   - ソースマップの検出が環境によって不安定

2. **タイミング関連の問題**
   - デバッグセッションの起動タイミング
   - ブレークポイントでの停止タイミング
   - ウォッチ式の評価タイミング

3. **出力形式の不一致**
   - ツールの実際の出力とテストの期待値が異なる
   - エラーメッセージの形式が統一されていない

### 📝 リリースノート用メモ

- 基本的なデバッグ機能（起動、ブレークポイント、ステッピング）は動作確認済み
- 一部のテストは環境依存により失敗する可能性あり
- v0.1.0は初期リリースとして基本機能を提供